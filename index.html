

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Lightning out test</title>
  </head>
  <body>

    <button onclick="login()">Login</button>

    <label for="productidinput">Product Id</label>
    <input id="productidinput" type="text">

    <button onclick="setNewId()">Add Product</button>
    
  <div id="lightning">
  </div>
  <script src="https://ruby-computing-2608.scratch.my.site.com/student/lightning/lightning.out.js"></script>
  <script>

    function login(){
      console.log('login');

      const client_id = "3MVG90J3nJBMnqrTSEFwQhhtC6vJE0MNoo6H6e7B7Vt8gkDYnUPBUz.l3syVc7HRSnB5.vOQtqwwU_6WYLCmB";
      const client_secret = "02089FA6BFE9D36E92FC70FB0B6A7F02BB8E95953366B99DBA8EF574159F170F";
      const response_type = "code";
      const baseURL = "https://https://ruby-computing-2608.scratch.my.salesforce.com/services/oauth2/authorize
      
      const requestURL = baseURL + "?resonse_type=" + response_type + "&client_id=" + client_id + "&client_secret=" + client_secret;

      let xhttp = new XMLHttpRequest();
      xhttp.open("POST", requestURL);
      xhttp.send();

      xhttp.onreadystatechange = () => {
        if (xhttp.readyState === xhttp.HEADERS_RECEIVED) {
          console.log("heisann peisann");
          const contentType = xhttp.getResponseHeader("Content-Type");
        }
      }

      console.log('done?');
    }
    function setNewId(){
        let value = document.getElementById('productidinput').value;
        lwc.productId = value;
        lwc.debugFromLWC('Du tastet inn: ' + value);
    }
        
    var lwc;
    const appName = 'c:LightningOut';
    const componentName = 'c:helloWorld';
    const lightningEndPointURI = 'https://ruby-computing-2608.scratch.my.site.com/student';
    // Target element er dom element componenten skal henges p√•
    const targetElement = 'lightning';
    const componentAttributes = {};
    const authToken ='';

    $Lightning.use(
        appName,
        function() {
        $Lightning.createComponent(
            componentName,
            componentAttributes,
            targetElement,
            function(cmp) {
                lwc = cmp.elements[0];
                console.log("LWC component was created");
            }
        );
    },
    lightningEndPointURI,
    authToken
    );

  </script>


  </body>
</html>